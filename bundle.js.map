{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://webpack--js.basic.09.2022/./src/getWeather.js","webpack://webpack--js.basic.09.2022/./src/getGeo.js","webpack://webpack--js.basic.09.2022/./src/createPage.js","webpack://webpack--js.basic.09.2022/./src/setCity.js","webpack://webpack--js.basic.09.2022/./src/addHistory.js","webpack://webpack--js.basic.09.2022/./src/clickLi.js","webpack://webpack--js.basic.09.2022/./src/resetResult.js","webpack://webpack--js.basic.09.2022/./src/index.js","webpack://webpack--js.basic.09.2022/./src/getInput.js"],"sourcesContent":["async function getWeather(city) {\n    try {\n        const getWeath = await fetch(\n            `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=9131f66cd3745fc87830ad367b122a9c`\n        );\n        let weather = await getWeath.json();\n        return weather;\n    } catch (err) {\n        return null;\n    }\n}\n\nexport { getWeather };\n","async function getGeo() {\n    try {\n        const result = await fetch('https://get.geojs.io/v1/ip/geo.json');\n        const data = await result.json();\n        return data;\n    } catch (err) {\n        return null;\n    }\n}\n\nexport { getGeo };\n","import { getWeather } from './getWeather';\nimport { getGeo } from './getGeo';\n\nasync function createPage() {\n    const cityData = await getGeo(); // начальная загрузка города\n    const weatherCity = await getWeather(cityData.city); // получение погоды\n    const content__result = document.querySelector('.content__result');\n    const pCity = document.createElement('p');\n    const pTemp = document.createElement('p');\n    const pIcon = document.createElement('img');\n    pCity.setAttribute('class', 'pCity');\n    pTemp.setAttribute('class', 'pTemp');\n    pIcon.setAttribute('class', 'icon');\n    pIcon.setAttribute(\n        'src',\n        `http://openweathermap.org/img/wn/${weatherCity.weather[0]['icon']}.png`\n    );\n    content__result.appendChild(pCity);\n    content__result.appendChild(pTemp);\n    content__result.appendChild(pIcon);\n    pCity.innerText = `Ваш город ${weatherCity.name}`;\n    pTemp.innerText = `Температура в городе: ${Math.ceil(\n        weatherCity.main.temp - 273.15\n    )}°C`;\n    const map = document.querySelector('.content__map');\n    const img = document.createElement('img');\n    map.appendChild(img);\n    img.setAttribute('class', 'content__map_img');\n    img.setAttribute(\n        'src',\n        `https://static-maps.yandex.ru/1.x/?ll=${cityData.longitude},${cityData.latitude}8&size=400,300&amp&spn=2,2&l=map`\n    );\n}\nexport { createPage };\n","async function setCity(str) {\n    try {\n        const getTemp = await fetch(\n            `https://api.openweathermap.org/data/2.5/weather?q=${str}&appid=9131f66cd3745fc87830ad367b122a9c`\n        );\n        let jsonT = await getTemp.json();\n        return jsonT;\n    } catch (err) {\n        return null;\n    }\n}\nexport { setCity };\n","import { clickLi } from './clickLi';\n\nexport function addHistory(obj) {\n    let arrHistory = JSON.parse(localStorage.getItem('history'));\n    const ul = document.querySelector('.history__ul');\n    //проверка первого сохранения localstorage в массив\n    let history = arrHistory === null ? [] : [...arrHistory];\n    //\n    // проверка есть ли повторения в архиве поиска\n    if (!history.includes(obj.name)) {\n        // проверяем количество записей в истории\n        if (history.length >= 10) {\n            history = history.slice(1);\n            document.querySelectorAll('li')[0].remove();\n        }\n        history.push(obj.name);\n        localStorage.clear();\n        localStorage.setItem('history', JSON.stringify(history));\n        const li = document.createElement('li');\n        li.innerText = obj.name;\n        ul.appendChild(li);\n        clickLi();\n    }\n}\n","import { resetResult } from './resetResult';\nexport function clickLi() {\n    const li = document.querySelectorAll('li');\n    li.forEach((element) => {\n        element.addEventListener('click', () => {\n            resetResult(element.textContent);\n        });\n    });\n}\n","import { setCity } from './setCity';\nimport { addHistory } from './addHistory';\n\nasync function resetResult(city) {\n    const json = await setCity(city);\n    const pTemp = document.querySelector('.pTemp');\n    const pCity = document.querySelector('.pCity');\n    const imgIcon = document.querySelector('.icon');\n    const img = document.querySelector('.content__map_img');\n    if (json.cod == '404') {\n        pCity.innerText = `Введите повторно - нет такого города в базе`;\n        pTemp.innerText = ``;\n        img.setAttribute(\n            'src',\n            `https://avatars.mds.yandex.net/i?id=8b74ba27269a7cf022fefea25f692daef9623322-4340501-images-thumbs&n=13`\n        );\n        return 'Введите повторно - нет такого города в базе';\n    } else {\n        pCity.innerText = `Ваш город: ${json.name}`;\n        pTemp.innerText = `Температура в Вашем городе: ${Math.ceil(\n            json.main.temp - 273.15\n        )}°C`;\n        imgIcon.setAttribute(\n            'src',\n            `http://openweathermap.org/img/wn/${json.weather[0]['icon']}.png`\n        );\n        img.setAttribute(\n            'src',\n            `https://static-maps.yandex.ru/1.x/?ll=${json.coord.lon},${json.coord.lat}8&size=400,300&amp&spn=2,2&l=map`\n        );\n        addHistory(json);\n        return `Ваш город ${json.name}`;\n    }\n}\n\nexport { resetResult };\n","import '../css/style.css';\nimport { createPage } from './createPage';\nimport { getInput } from './getInput';\n\nlocalStorage.clear();\ncreatePage();\ngetInput();\n","import { resetResult } from './resetResult';\n\nexport function getInput() {\n    const button = document.querySelector('.search__form_buttom');\n    button.addEventListener('click', () => {\n        const str = document.querySelector('.search__form_input').value;\n        resetResult(str);\n    });\n}\n"],"names":["getWeather","city","fetch","getWeath","json","weather","getGeo","result","data","i","cityData","weatherCity","content__result","document","querySelector","pCity","createElement","pTemp","pIcon","setAttribute","appendChild","innerText","name","Math","ceil","main","temp","map","img","longitude","latitude","setCity","str","getTemp","jsonT","addHistory","obj","arrHistory","JSON","parse","localStorage","getItem","ul","history","includes","length","slice","querySelectorAll","remove","push","clear","setItem","stringify","li","forEach","element","addEventListener","resetResult","textContent","imgIcon","cod","coord","lon","lat","createPage","value"],"sourceRoot":""}